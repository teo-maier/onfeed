@import 'colors', 'mixins';

$image-spacing: 2px;
$discriminator-size: 4px;

.avatar {
	display: flex;
	flex-grow: 0;
	flex-shrink: 0;
	width: fit-content;
	height: fit-content;
	margin: $image-spacing;
	border-radius: 50%;
	position: relative;
	transition: all 300ms;
	will-change: background-color;

	&:hover:not(.avatar--disabled) {
		filter: opacity(0.75);

		&::before {
			top: calc(-1 * (#{$discriminator-size} + #{$image-spacing} + 4px));
		}

		.avatar__overlay {
			opacity: 1;
		}
	}

	&--disabled {
		filter: opacity(0.5);
		cursor: not-allowed;
	}

	&--notification {
		color: color($red-shades, 500);
	}

	&--outline {
		outline: 2px solid currentColor;
	}

	&--discriminator {
		&::before {
			content: '';
			width: $discriminator-size;
			height: $discriminator-size;
			position: absolute;
			top: calc(-1 * (#{$discriminator-size} + #{$image-spacing}));
			left: 50%;
			transform: translate(-50%, -50%);
			background-color: currentColor;
			border-radius: 50%;
			transition: all 300ms;
			will-change: top;
		}
	}

	&__content {
		object-fit: cover;
		background-color: currentColor;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		position: absolute;
		left: 0;
		top: 0;
		margin: $image-spacing;

		&--text {
			color: $white;
			user-select: none;
			mix-blend-mode: screen;
		}

		&--square {
			border-radius: 12px;
		}

		&__placeholder {
			background-color: color($greyscale, 700);
			border: 1px solid color($greyscale, 800);
			display: flex;
			justify-content: center;
			&__icon {
				width: 100%;
				color: color($greyscale, 300);
				display: flex;
				align-self: center;
				z-index: 2;
			}
		}
	}

	&__overlay {
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0;
		transition: opacity 300ms;
		z-index: 3;
		margin: 2px;
		border-radius: 12px;
		background-color: rgba(color($greyscale, 300), 0.5);

		&__icon {
			color: $white;
		}
	}
}

:export {
	imageSpacing: $image-spacing;
}
